---
// Layout.astro - Base layout for all pages
// This wraps every page with common HTML, meta tags, and styles

interface Props {
  title?: string;
  description?: string;
}

const {
  title = "Bitterroot Sound | Custom Songs Starting at $49.99",
  description = "Custom AI-crafted songs starting at $49.99. Wedding songs, memorial tributes, business jingles & more. 48-72 hour delivery. Montana-based song creation service with 4.9★ rating."
} = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <meta name="keywords" content="custom song, personalized song, wedding song, memorial song, business jingle, AI music, custom music, Montana, voice clone song" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://bitterrootsound.netlify.app" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    <!-- Font Preload for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Open Graph / Social -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://bitterrootsound.netlify.app" />
    <meta property="og:image" content="https://bitterrootsound.netlify.app/og-image.jpg" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content="https://bitterrootsound.netlify.app/og-image.jpg" />

    <!-- LocalBusiness Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LocalBusiness",
      "name": "Bitterroot Sound LLC",
      "description": "Custom AI-crafted songs for weddings, memorials, business jingles, and life's meaningful moments. Professional song creation service in Montana.",
      "url": "https://bitterrootsound.netlify.app",
      "telephone": "+1-406-555-SONG",
      "email": "hello@bitterrootsound.com",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Hamilton",
        "addressRegion": "MT",
        "addressCountry": "US"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 46.2468,
        "longitude": -114.1614
      },
      "priceRange": "$39.99 - $199.99",
      "openingHours": "Mo-Fr 09:00-17:00",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "reviewCount": "127"
      },
      "sameAs": []
    }
    </script>

    <!-- Service Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Service",
      "serviceType": "Custom Song Creation",
      "provider": {
        "@type": "LocalBusiness",
        "name": "Bitterroot Sound LLC"
      },
      "areaServed": {
        "@type": "Country",
        "name": "United States"
      },
      "hasOfferCatalog": {
        "@type": "OfferCatalog",
        "name": "Custom Song Services",
        "itemListElement": [
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Custom Song",
              "description": "Personalized song in any genre"
            },
            "price": "49.99",
            "priceCurrency": "USD"
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Wedding Song",
              "description": "Custom song for weddings and ceremonies"
            },
            "price": "149.99",
            "priceCurrency": "USD"
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Memorial Tribute",
              "description": "Memorial songs with optional voice cloning"
            },
            "price": "199.99",
            "priceCurrency": "USD"
          }
        ]
      }
    }
    </script>

    <!-- Title -->
    <title>{title}</title>
  </head>
  <body class="min-h-screen">
    <slot />

    <!-- Floating Trust Badge - appears on scroll -->
    <div
      id="trust-float"
      class="fixed bottom-4 right-4 bg-white shadow-warm-lg rounded-warm p-3 hidden md:flex items-center gap-2 z-40 opacity-0 translate-y-4 transition-all duration-300"
    >
      <span class="text-gold text-lg">★★★★★</span>
      <span class="text-sm text-bark font-semibold">4.9/5 from 127 reviews</span>
    </div>

    <!-- Floating Trust Badge Script -->
    <script>
      const trustFloat = document.getElementById('trust-float');
      if (trustFloat) {
        window.addEventListener('scroll', () => {
          if (window.scrollY > 600) {
            trustFloat.classList.remove('opacity-0', 'translate-y-4');
          } else {
            trustFloat.classList.add('opacity-0', 'translate-y-4');
          }
        });
      }
    </script>
  </body>
</html>

<style is:global>
  @import '../styles/global.css';
</style>
